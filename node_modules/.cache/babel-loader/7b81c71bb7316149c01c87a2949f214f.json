{"ast":null,"code":"var _jsxFileName = \"/Users/licop/Documents/GitHub/licop-kanban/src/KanbanCard.js\",\n  _s = $RefreshSig$();\n/** @jsxImportSource @emotion/react */\nimport React, { useState, useEffect } from 'react';\nimport { css } from '@emotion/react';\nimport { jsxDEV as _jsxDEV } from \"@emotion/react/jsx-dev-runtime\";\nexport const kanbanCardStyles = css`\n  margin-bottom: 1rem;\n  padding: 0.6rem 1rem;\n  border: 1px solid gray;\n  border-radius: 1rem;\n  list-style: none;\n  background-color: rgba(255, 255, 255, 0.4);\n  text-align: left;\n\n  &:hover {\n    box-shadow: 0 0.3rem 0.3rem rgba(0, 0, 0, 0.3), inset 0 1px #fff;\n  }\n`;\nexport const kanbanCardTitleStyles = css`\n  min-height: 3rem;\n`;\nconst MINUTE = 60 * 1000;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\nconst UPDATE_INTERVAL = MINUTE;\nconst KanbanCard = _ref => {\n  _s();\n  let {\n    title,\n    status,\n    onDragStart\n  } = _ref;\n  const [displayTime, setDisplayTime] = useState(status);\n  useEffect(() => {\n    const updateDisplayTime = () => {\n      const timePassed = new Date() - new Date(status);\n      let relativeTime = '刚刚';\n      if (MINUTE <= timePassed && timePassed < HOUR) {\n        relativeTime = `${Math.ceil(timePassed / MINUTE)} 分钟前`;\n      } else if (HOUR <= timePassed && timePassed < DAY) {\n        relativeTime = `${Math.ceil(timePassed / HOUR)} 小时前`;\n      } else if (DAY <= timePassed) {\n        relativeTime = `${Math.ceil(timePassed / DAY)} 天前`;\n      }\n      setDisplayTime(relativeTime);\n    };\n    const intervalId = setInterval(updateDisplayTime, UPDATE_INTERVAL);\n    updateDisplayTime();\n    return function cleanUp() {\n      clearInterval(intervalId);\n    };\n  }, [status]);\n  const handleDragStart = evt => {\n    evt.dataTransfer.effectAllowed = 'move';\n    evt.dataTransfer.setData('text/plain', title);\n    onDragStart && onDragStart(evt);\n  };\n  return _jsxDEV(\"li\", {\n    css: kanbanCardStyles,\n    draggable: true,\n    onDragStart: handleDragStart,\n    children: [_jsxDEV(\"div\", {\n      css: kanbanCardTitleStyles,\n      children: title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this), _jsxDEV(\"div\", {\n      css: css`\n        text-align: right;\n        font-size: 0.8rem;\n        color: #333;\n      `,\n      children: displayTime\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(KanbanCard, \"WePdfdmWEAQdccS2j3kRKCFLfZI=\");\n_c = KanbanCard;\nexport default KanbanCard;\nvar _c;\n$RefreshReg$(_c, \"KanbanCard\");","map":{"version":3,"names":["React","useState","useEffect","css","kanbanCardStyles","kanbanCardTitleStyles","MINUTE","HOUR","DAY","UPDATE_INTERVAL","KanbanCard","title","status","onDragStart","displayTime","setDisplayTime","updateDisplayTime","timePassed","Date","relativeTime","Math","ceil","intervalId","setInterval","cleanUp","clearInterval","handleDragStart","evt","dataTransfer","effectAllowed","setData"],"sources":["/Users/licop/Documents/GitHub/licop-kanban/src/KanbanCard.js"],"sourcesContent":["/** @jsxImportSource @emotion/react */\nimport React, { useState, useEffect } from 'react';\nimport { css } from '@emotion/react';\n\nexport const kanbanCardStyles = css`\n  margin-bottom: 1rem;\n  padding: 0.6rem 1rem;\n  border: 1px solid gray;\n  border-radius: 1rem;\n  list-style: none;\n  background-color: rgba(255, 255, 255, 0.4);\n  text-align: left;\n\n  &:hover {\n    box-shadow: 0 0.3rem 0.3rem rgba(0, 0, 0, 0.3), inset 0 1px #fff;\n  }\n`;\n\nexport const kanbanCardTitleStyles = css`\n  min-height: 3rem;\n`;\n\nconst MINUTE = 60 * 1000;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\nconst UPDATE_INTERVAL = MINUTE;\n\nconst KanbanCard = ({ title, status, onDragStart }) => {\n  const [displayTime, setDisplayTime] = useState(status);\n  \n  useEffect(() => {\n    const updateDisplayTime = () => {\n      const timePassed = new Date() - new Date(status);\n      let relativeTime = '刚刚';\n      if (MINUTE <= timePassed && timePassed < HOUR) {\n        relativeTime = `${Math.ceil(timePassed / MINUTE)} 分钟前`;\n      } else if (HOUR <= timePassed && timePassed < DAY) {\n        relativeTime = `${Math.ceil(timePassed / HOUR)} 小时前`;\n      } else if (DAY <= timePassed) {\n        relativeTime = `${Math.ceil(timePassed / DAY)} 天前`;\n      }\n      setDisplayTime(relativeTime);\n    };\n\n    const intervalId = setInterval(updateDisplayTime, UPDATE_INTERVAL);\n    updateDisplayTime();\n\n    return function cleanUp () {\n      clearInterval(intervalId);\n    };\n  }, [status]);\n\n  const handleDragStart = (evt) => {\n    evt.dataTransfer.effectAllowed = 'move';\n    evt.dataTransfer.setData('text/plain', title);\n    onDragStart && onDragStart(evt);\n  };\n\n  return (\n    <li css={kanbanCardStyles} draggable onDragStart={handleDragStart}>\n      <div css={kanbanCardTitleStyles}>{title}</div>\n      <div css={css`\n        text-align: right;\n        font-size: 0.8rem;\n        color: #333;\n      `}>{displayTime}</div>\n    </li>\n  );\n};\n\nexport default KanbanCard;\n"],"mappings":";;AAAA;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,GAAG,QAAQ,gBAAgB;AAAC;AAErC,OAAO,MAAMC,gBAAgB,GAAGD,GAAI;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,OAAO,MAAME,qBAAqB,GAAGF,GAAI;AACzC;AACA,CAAC;AAED,MAAMG,MAAM,GAAG,EAAE,GAAG,IAAI;AACxB,MAAMC,IAAI,GAAG,EAAE,GAAGD,MAAM;AACxB,MAAME,GAAG,GAAG,EAAE,GAAGD,IAAI;AACrB,MAAME,eAAe,GAAGH,MAAM;AAE9B,MAAMI,UAAU,GAAG,QAAoC;EAAA;EAAA,IAAnC;IAAEC,KAAK;IAAEC,MAAM;IAAEC;EAAY,CAAC;EAChD,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAACW,MAAM,CAAC;EAEtDV,SAAS,CAAC,MAAM;IACd,MAAMc,iBAAiB,GAAG,MAAM;MAC9B,MAAMC,UAAU,GAAG,IAAIC,IAAI,EAAE,GAAG,IAAIA,IAAI,CAACN,MAAM,CAAC;MAChD,IAAIO,YAAY,GAAG,IAAI;MACvB,IAAIb,MAAM,IAAIW,UAAU,IAAIA,UAAU,GAAGV,IAAI,EAAE;QAC7CY,YAAY,GAAI,GAAEC,IAAI,CAACC,IAAI,CAACJ,UAAU,GAAGX,MAAM,CAAE,MAAK;MACxD,CAAC,MAAM,IAAIC,IAAI,IAAIU,UAAU,IAAIA,UAAU,GAAGT,GAAG,EAAE;QACjDW,YAAY,GAAI,GAAEC,IAAI,CAACC,IAAI,CAACJ,UAAU,GAAGV,IAAI,CAAE,MAAK;MACtD,CAAC,MAAM,IAAIC,GAAG,IAAIS,UAAU,EAAE;QAC5BE,YAAY,GAAI,GAAEC,IAAI,CAACC,IAAI,CAACJ,UAAU,GAAGT,GAAG,CAAE,KAAI;MACpD;MACAO,cAAc,CAACI,YAAY,CAAC;IAC9B,CAAC;IAED,MAAMG,UAAU,GAAGC,WAAW,CAACP,iBAAiB,EAAEP,eAAe,CAAC;IAClEO,iBAAiB,EAAE;IAEnB,OAAO,SAASQ,OAAO,GAAI;MACzBC,aAAa,CAACH,UAAU,CAAC;IAC3B,CAAC;EACH,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;EAEZ,MAAMc,eAAe,GAAIC,GAAG,IAAK;IAC/BA,GAAG,CAACC,YAAY,CAACC,aAAa,GAAG,MAAM;IACvCF,GAAG,CAACC,YAAY,CAACE,OAAO,CAAC,YAAY,EAAEnB,KAAK,CAAC;IAC7CE,WAAW,IAAIA,WAAW,CAACc,GAAG,CAAC;EACjC,CAAC;EAED,OACE;IAAI,GAAG,EAAEvB,gBAAiB;IAAC,SAAS;IAAC,WAAW,EAAEsB,eAAgB;IAAA,WAChE;MAAK,GAAG,EAAErB,qBAAsB;MAAA,UAAEM;IAAK;MAAA;MAAA;MAAA;IAAA,QAAO,EAC9C;MAAK,GAAG,EAAER,GAAI;AACpB;AACA;AACA;AACA,OAAQ;MAAA,UAAEW;IAAW;MAAA;MAAA;MAAA;IAAA,QAAO;EAAA;IAAA;IAAA;IAAA;EAAA,QACnB;AAET,CAAC;AAAC,GAzCIJ,UAAU;AAAA,KAAVA,UAAU;AA2ChB,eAAeA,UAAU;AAAC;AAAA"},"metadata":{},"sourceType":"module"}